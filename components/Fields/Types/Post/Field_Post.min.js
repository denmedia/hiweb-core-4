var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
var hiweb_field_type_post={init:function(a){a=jQuery(a);a.is(".hiweb-field-type-post")||(a=a.closest(".hiweb-field-type-post"));0===a.length&&(a=jQuery(this));0<a.length&&!a.is(".hiweb-field-type-post-init")&&(a.addClass("hiweb-field-type-post-init"),hiweb_field_type_post.make_selectize(a))},_load_posts:function(a,b,c){"string"!==typeof b&&(b="");var d=JSON.parse(a.attr("data-options"));jQuery.ajax({url:ajaxurl+"?action=hiweb-components-fields-type-post",type:"POST",dataType:"json",data:{global_id:a.attr("data-global-id"),
search:b,post_type:d.post_type},error:function(){"function"===c&&c()},success:function(a){a.hasOwnProperty("success")?a.success&&"function"===typeof c?c(a.items):console.warn(a):console.error("hiweb-input-post: \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0440\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043f\u0438\u0441\u0435\u0439")}})},make_selectize:function(a){var b=a.find("select[name]");JSON.parse(b.attr("data-options"));
b.selectize({closeAfterSelect:!0,allowEmptyOption:!0,valueField:"value",labelField:"title",searchField:"title",placeholder:b.attr("placeholder"),options:[],plugins:["remove_button","drag_drop"],create:!1,onInitialize:function(){hiweb_field_type_post._load_posts(b,"",function(a){var c=jQuery.parseJSON(b.attr("data-value"));b.each(function(){for(var b in a)this.selectize.addOption(a[b]);this.selectize.addItem(c)})})},load:function(a,d){if(!a.length)return d();hiweb_field_type_post._load_posts(b,a,d)}})}};
jQuery(".hiweb-field-post").each(hiweb_field_type_post.init);jQuery("body").on("hiweb-form-ajax-loaded hiweb-field-repeat-added-row",".hiweb-components-form-ajax-wrap",function(){jQuery(this).find(".hiweb-field-type-post").each(hiweb_field_type_post.init)});
