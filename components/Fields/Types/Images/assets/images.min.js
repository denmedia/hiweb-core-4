var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var h=b[e];if(a.call(c,h,e,b))return{i:e,v:h}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,a,c,d){if(a){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
var hiweb_field_images=function(b){var a=jQuery(b.target),c=a.find("[data-source-image]"),d=a.find("[data-images-wrap]"),e=function(){var b=d.find("[data-item-image]").length;a.attr("data-images-count",b);a.find("[data-images-count-wrap]").html(b);24<b?a.attr("data-images-count-id","many"):12<b?a.attr("data-images-count-id","medium"):a.attr("data-images-count-id","low")};e();"function"===typeof d.sortable&&d.sortable({items:"[data-item-image]",distance:5,cursor:"move",helper:"original",tolerance:"pointer",
revert:!0,forcePlaceholderSize:!0,connectWith:jQuery(".hiweb-field_images [data-images-wrap]"),start:function(){d.sortable("option","connectWith",jQuery(".hiweb-field_images [data-images-wrap]"))},update:function(){d.find(":input[name]").attr("name",c.find(":input[name]").attr("name"))}});var h=function(b,a){var f=wp.media({title:"\u0412\u044b\u0431\u043e\u0440 \u0444\u0430\u0439\u043b\u0430",multiple:!0,button:{text:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b"},library:{type:"image"}}),
l=!1;if("undefined"!==typeof a){var g=jQuery(a).find("input[name]");0<g.length&&(l=jQuery(a),f.on("open",function(){var b=f.state().get("selection"),a=wp.media.attachment(g.val());a.fetch();b.add(a?[a]:[])}))}f.on("select",function(){f.state().get("selection").forEach(function(a,f){a=a.toJSON();if(a.hasOwnProperty("id")){var g=f="",h="";a.hasOwnProperty("icon")&&(f=a.icon);if(a.hasOwnProperty("sizes"))if(a.sizes.hasOwnProperty("medium"))f=a.sizes.medium.url;else if(a.sizes.hasOwnProperty("thumbnail"))f=
a.sizes.thumbnail.url;else for(var k in a.sizes){f=a.sizes[k].url;break}a.hasOwnProperty("editLink")&&(g=a.editLink);a.hasOwnProperty("url")&&(h=a.url);!1===l?(k=c.clone(!0),k.removeAttr("data-source-image").attr("data-item-image",a.id).attr("data-attachment-id",a.id).css({"background-image":"url("+f+")"}),k.find('[data-link="edit_link"]').attr("href",g),k.find('[data-link="url"]').attr("href",h),k.find("input").val(a.id),0>b?d.find('[data-image-plus="1"]').before(k):d.find('[data-image-plus="0"]').after(k),
e()):(l.attr("data-item-image",a.id).attr("data-attachment-id",a.id).css({"background-image":"url("+f+")"}),l.find('[data-link="edit_link"]').attr("href",g),l.find('[data-link="url"]').attr("href",h),l.find("input").val(a.id))}});e()});f.open()};a.on("click","[data-click]",function(a){a.preventDefault()}).on("click",'[data-click="add"]',function(a){a=jQuery(a.target).closest("[data-click]").attr("data-add-index");h(a)}).on("click",'[data-click="revert"]',function(){}).on("click",'[data-click="shuffle"]',
function(){var a=d.find("[data-item-image]"),b,c=a.length,e=a.parent(),g=[];for(b=0;b<c;b++)g.push(b);for(b=0;b<c;b++){var h=Math.random()*c|0;var m=Math.random()*c|0;var n=g[h];g[h]=g[m];g[m]=n}a.detach();for(b=0;b<c;b++)e.append(a.eq(g[b]))}).on("click",'[data-click="clear"]',function(){d.find("[data-item-image]").slideUp(500,function(){d.attr("style","");d.find("[data-item-image]").remove();e()})}).on("click",'[data-click="edit"]',function(a){h(0,jQuery(a.target).closest("[data-item-image]"))}).on("click",
'[data-click="remove"]',function(a){var b=jQuery(a.target).closest("[data-item-image]");b.fadeOut(500,function(){b.remove();e()})})};jQuery("body").on("field_init",".hiweb-field_images",hiweb_field_images);
