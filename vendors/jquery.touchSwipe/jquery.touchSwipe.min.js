/*
 @fileOverview TouchSwipe - jQuery Plugin
 @version 1.6.18

 @author Matt Bryson http://www.github.com/mattbryson
 @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 @see http://labs.rampinteractive.co.uk/touchSwipe/
 @see http://plugins.jquery.com/project/touchSwipe
 @license
 Copyright (c) 2010-2015 Matt Bryson
 Dual licensed under the MIT or GPL Version 2 licenses.

*/
(function(l){"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],l):"undefined"!==typeof module&&module.exports?l(require("jquery")):l(jQuery)})(function(l){function W(d){!d||void 0!==d.allowPageScroll||void 0===d.swipe&&void 0===d.swipeStatus||(d.allowPageScroll="none");void 0!==d.click&&void 0===d.tap&&(d.tap=d.click);d||(d={});d=l.extend({},l.fn.swipe.defaults,d);return this.each(function(){var b=l(this),n=b.data("TouchSwipe");n||(n=new pa(this,d),b.data("TouchSwipe",n))})}
function pa(d,b){function n(a){if(!0!==c.data("TouchSwipe_intouch")&&!(0<l(a.target).closest(b.excludedElements,c).length)){var e=a.originalEvent?a.originalEvent:a;if(!e.pointerType||"mouse"!=e.pointerType||0!=b.fallbackToMouseEvents){var f=e.touches,qa=f?f[0]:e;g="start";f?h=f.length:!1!==b.preventDefaultEvents&&a.preventDefault();p=0;w=r=q=null;z=A=m=0;u=1;x=0;K=W();L=G=0;M(0,qa);if(!f||h===b.fingers||"all"===b.fingers||N()){if(O=B(),2==h&&(M(1,f[1]),A=z=X(k[0].start,k[1].start)),b.swipeStatus||
b.pinchStatus)var d=v(e,g)}else d=!1;if(!1===d)return g="cancel",v(e,g),d;b.hold&&(H=setTimeout(l.proxy(function(){c.trigger("hold",[e.target]);b.hold&&(d=b.hold.call(c,e,e.target))},this),b.longTapThreshold));P(!0);return null}}}function Y(a){var e=a.originalEvent?a.originalEvent:a;if("end"!==g&&"cancel"!==g&&!Q()){var f=e.touches;var c=ha(f?f[0]:e);I=B();f&&(h=f.length);b.hold&&clearTimeout(H);g="move";2==h&&(0==A?(M(1,f[1]),A=z=X(k[0].start,k[1].start)):(ha(f[1]),z=X(k[0].end,k[1].end),w=1>u?"out":
"in"),u=(z/A).toFixed(2),x=Math.abs(A-z));if(h===b.fingers||"all"===b.fingers||!f||N()){q=ia(c.start,c.end);r=ia(c.last,c.end);var d=r;if(!1!==b.preventDefaultEvents)if("none"===b.allowPageScroll)a.preventDefault();else switch(f="auto"===b.allowPageScroll,d){case "left":(b.swipeLeft&&f||!f&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "right":(b.swipeRight&&f||!f&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "up":(b.swipeUp&&f||!f&&"vertical"!=b.allowPageScroll)&&
a.preventDefault();break;case "down":(b.swipeDown&&f||!f&&"vertical"!=b.allowPageScroll)&&a.preventDefault()}d=c.start;a=c.end;p=Math.round(Math.sqrt(Math.pow(a.x-d.x,2)+Math.pow(a.y-d.y,2)));m=I-O;d=q;a=p;"none"!=d&&(a=Math.max(a,ja(d)),K[d].distance=a);d=v(e,g);if(!b.triggerOnTouchEnd||b.triggerOnTouchLeave){a=!0;if(b.triggerOnTouchLeave){var n=l(this);var t=n.offset();a=t.left;f=t.left+n.outerWidth();var y=t.top;n=t.top+n.outerHeight();c=c.end;a=c.x>a&&c.x<f&&c.y>y&&c.y<n}!b.triggerOnTouchEnd&&
a?g=Z("move"):b.triggerOnTouchLeave&&!a&&(g=Z("end"));"cancel"!=g&&"end"!=g||v(e,g)}}else g="cancel",v(e,g);!1===d&&(g="cancel",v(e,g))}}function aa(a){var e=a.originalEvent?a.originalEvent:a,f=e.touches;if(f){if(f.length&&!Q())return G=B(),L=e.touches.length+1,!0;if(f.length&&Q())return!0}Q()&&(h=L);I=B();m=I-O;ba()||!ca()?(g="cancel",v(e,g)):b.triggerOnTouchEnd||!1===b.triggerOnTouchEnd&&"move"===g?(!1!==b.preventDefaultEvents&&!1!==a.cancelable&&a.preventDefault(),g="end",v(e,g)):!b.triggerOnTouchEnd&&
b.tap?(g="end",y(e,g,"tap")):"move"===g&&(g="cancel",v(e,g));P(!1);return null}function C(){z=A=O=I=h=0;u=1;L=G=0;P(!1)}function da(a){a=a.originalEvent?a.originalEvent:a;b.triggerOnTouchLeave&&(g=Z("end"),v(a,g))}function ka(){c.off(R,n);c.off(S,C);c.off(ea,Y);c.off(fa,aa);D&&c.off(D,da);P(!1)}function Z(a){var e=a,f=b.maxTimeThreshold?m>=b.maxTimeThreshold?!1:!0:!0,c=ca(),d=ba();!f||d?e="cancel":!c||"move"!=a||b.triggerOnTouchEnd&&!b.triggerOnTouchLeave?!c&&"end"==a&&b.triggerOnTouchLeave&&(e="cancel"):
e="end";return e}function v(a,e){var c=a.touches;if(la()&&ma()||ma())var d=y(a,e,"swipe");(na()&&N()||N())&&!1!==d&&(d=y(a,e,"pinch"));oa()&&b.doubleTap&&!1!==d?d=y(a,e,"doubletap"):m>b.longTapThreshold&&10>p&&b.longTap&&!1!==d?d=y(a,e,"longtap"):(1===h||!E)&&(isNaN(p)||p<b.threshold)&&b.tap&&!1!==d&&(d=y(a,e,"tap"));"cancel"===e&&C(a);"end"===e&&(c?c.length||C(a):C(a));return d}function y(a,e,f){if("swipe"==f){c.trigger("swipeStatus",[e,q||null,p||0,m||0,h,k,r]);if(b.swipeStatus){var d=b.swipeStatus.call(c,
a,e,q||null,p||0,m||0,h,k,r);if(!1===d)return!1}if("end"==e&&la()){clearTimeout(J);clearTimeout(H);c.trigger("swipe",[q,p,m,h,k,r]);if(b.swipe&&(d=b.swipe.call(c,a,q,p,m,h,k,r),!1===d))return!1;switch(q){case "left":c.trigger("swipeLeft",[q,p,m,h,k,r]);b.swipeLeft&&(d=b.swipeLeft.call(c,a,q,p,m,h,k,r));break;case "right":c.trigger("swipeRight",[q,p,m,h,k,r]);b.swipeRight&&(d=b.swipeRight.call(c,a,q,p,m,h,k,r));break;case "up":c.trigger("swipeUp",[q,p,m,h,k,r]);b.swipeUp&&(d=b.swipeUp.call(c,a,q,p,
m,h,k,r));break;case "down":c.trigger("swipeDown",[q,p,m,h,k,r]),b.swipeDown&&(d=b.swipeDown.call(c,a,q,p,m,h,k,r))}}}if("pinch"==f){c.trigger("pinchStatus",[e,w||null,x||0,m||0,h,u,k]);if(b.pinchStatus&&(d=b.pinchStatus.call(c,a,e,w||null,x||0,m||0,h,u,k),!1===d))return!1;if("end"==e&&na())switch(w){case "in":c.trigger("pinchIn",[w||null,x||0,m||0,h,u,k]);b.pinchIn&&(d=b.pinchIn.call(c,a,w||null,x||0,m||0,h,u,k));break;case "out":c.trigger("pinchOut",[w||null,x||0,m||0,h,u,k]),b.pinchOut&&(d=b.pinchOut.call(c,
a,w||null,x||0,m||0,h,u,k))}}if("tap"==f){if("cancel"===e||"end"===e)clearTimeout(J),clearTimeout(H),b.doubleTap&&!oa()?(t=B(),J=setTimeout(l.proxy(function(){t=null;c.trigger("tap",[a.target]);b.tap&&(d=b.tap.call(c,a,a.target))},this),b.doubleTapThreshold)):(t=null,c.trigger("tap",[a.target]),b.tap&&(d=b.tap.call(c,a,a.target)))}else if("doubletap"==f){if("cancel"===e||"end"===e)clearTimeout(J),clearTimeout(H),t=null,c.trigger("doubletap",[a.target]),b.doubleTap&&(d=b.doubleTap.call(c,a,a.target))}else"longtap"!=
f||"cancel"!==e&&"end"!==e||(clearTimeout(J),t=null,c.trigger("longtap",[a.target]),b.longTap&&(d=b.longTap.call(c,a,a.target)));return d}function ca(){var a=!0;null!==b.threshold&&(a=p>=b.threshold);return a}function ba(){var a=!1;null!==b.cancelThreshold&&null!==q&&(a=ja(q)-p>=b.cancelThreshold);return a}function na(){var a=h===b.fingers||"all"===b.fingers||!E,e=0!==k[0].end.x;var c=null!==b.pinchThreshold?x>=b.pinchThreshold:!0;return a&&e&&c}function N(){return!!(b.pinchStatus||b.pinchIn||b.pinchOut)}
function la(){var a=b.maxTimeThreshold?m>=b.maxTimeThreshold?!1:!0:!0,c=ca(),d=h===b.fingers||"all"===b.fingers||!E,g=0!==k[0].end.x;return!ba()&&g&&d&&c&&a}function ma(){return!!(b.swipe||b.swipeStatus||b.swipeLeft||b.swipeRight||b.swipeUp||b.swipeDown)}function oa(){if(null==t)return!1;var a=B();return!!b.doubleTap&&a-t<=b.doubleTapThreshold}function Q(){var a=!1;G&&B()-G<=b.fingerReleaseThreshold&&(a=!0);return a}function P(a){if(c){if(!0===a){if(c.on(ea,Y),c.on(fa,aa),D)c.on(D,da)}else c.off(ea,
Y,!1),c.off(fa,aa,!1),D&&c.off(D,da,!1);c.data("TouchSwipe_intouch",!0===a)}}function M(a,b){var c={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};c.start.x=c.last.x=c.end.x=b.pageX||b.clientX;c.start.y=c.last.y=c.end.y=b.pageY||b.clientY;return k[a]=c}function ha(a){var b=void 0!==a.identifier?a.identifier:0,c=k[b]||null;null===c&&(c=M(b,a));c.last.x=c.end.x;c.last.y=c.end.y;c.end.x=a.pageX||a.clientX;c.end.y=a.pageY||a.clientY;return c}function ja(a){if(K[a])return K[a].distance}function W(){var a=
{};a.left=T("left");a.right=T("right");a.up=T("up");a.down=T("down");return a}function T(a){return{direction:a,distance:0}}function X(a,b){var c=Math.abs(a.x-b.x);a=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+a*a))}function ia(a,b){if(a.x==b.x&&a.y==b.y)return"none";a=Math.round(180*Math.atan2(b.y-a.y,a.x-b.x)/Math.PI);0>a&&(a=360-Math.abs(a));return 45>=a&&0<=a?"left":360>=a&&315<=a?"left":135<=a&&225>=a?"right":45<a&&135>a?"down":"up"}function B(){return(new Date).getTime()}b=l.extend({},
b);var U=E||F||!b.fallbackToMouseEvents,R=U?F?V?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ea=U?F?V?"MSPointerMove":"pointermove":"touchmove":"mousemove",fa=U?F?V?"MSPointerUp":"pointerup":"touchend":"mouseup",D=U?F?"mouseleave":null:"mouseleave",S=F?V?"MSPointerCancel":"pointercancel":"touchcancel",p=0,q=null,r=null,m=0,A=0,z=0,u=1,x=0,w=0,K=null,c=l(d),g="start",h=0,k={},O=0,I=0,G=0,L=0,t=0,J=null,H=null;try{c.on(R,n),c.on(S,C)}catch(a){l.error("events not supported "+R+","+S+" on jQuery.swipe")}this.enable=
function(){this.disable();c.on(R,n);c.on(S,C);return c};this.disable=function(){ka();return c};this.destroy=function(){ka();c.data("TouchSwipe",null);c=null};this.option=function(a,c){if("object"===typeof a)b=l.extend(b,a);else if(void 0!==b[a]){if(void 0===c)return b[a];b[a]=c}else if(a)l.error("Option "+a+" does not exist on jQuery.swipe.options");else return b;return null}}var E="ontouchstart"in window,V=window.navigator.msPointerEnabled&&!window.PointerEvent&&!E,F=(window.PointerEvent||window.navigator.msPointerEnabled)&&
!E;l.fn.swipe=function(d){var b=l(this),n=b.data("TouchSwipe");if(n&&"string"===typeof d){if(n[d])return n[d].apply(n,Array.prototype.slice.call(arguments,1));l.error("Method "+d+" does not exist on jQuery.swipe")}else if(n&&"object"===typeof d)n.option.apply(n,arguments);else if(!(n||"object"!==typeof d&&d))return W.apply(this,arguments);return b};l.fn.swipe.version="1.6.18";l.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,
longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};l.fn.swipe.phases={PHASE_START:"start",PHASE_MOVE:"move",PHASE_END:"end",PHASE_CANCEL:"cancel"};l.fn.swipe.directions={LEFT:"left",
RIGHT:"right",UP:"up",DOWN:"down",IN:"in",OUT:"out"};l.fn.swipe.pageScroll={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"};l.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:"all"}});
