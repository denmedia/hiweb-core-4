var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
var hiweb_theme_widget_forms={form_root_seletor:".hiweb-theme-widget-form",wrap_root_selector:"",status_root_selector:".hiweb-theme-widget-form-status",recaptcha_local_selector:'input[name="recaptcha-token"]',init:function(){$(hiweb_theme_widget_forms.form_root_seletor).each(function(){$(this).find('button[type="submit"]').removeAttr("disabled");hiweb_theme_widget_forms.make($(this))});$("body").on("click","a[href][data-widget-form-modal-open]",function(){var a=$($(this).attr("href"));if(0<a.length){var b=
JSON.parse($(this).attr("data-values")),c;for(c in b)"object"==typeof b[c]?a.find('[name="'+c+'"]').val(JSON.stringify(b[c])):a.find('[name="'+c+'"]').val(b[c]);a.find("[data-ajax-html]").each(function(){var a=$(this);a.css({opacity:0});$.ajax({url:"/wp-json/hiweb_theme/forms/input_html",type:"post",dataType:"json",data:{form_id:a.closest("[data-form-id]").attr("data-form-id"),data:a.find("[name]").serializeArray()},success:function(b){b.success&&(a.fadeIn(500),a.replaceWith(b.html))}})})}$("body").trigger("hiweb-theme-form-modal-open",
$(this))});$("body").on("submit",hiweb_theme_widget_forms.form_root_seletor,function(a){"undefined"===typeof $._data($(this).get(0),"events")&&(a.preventDefault(),hiweb_theme_widget_forms.make($(this)),$(this).trigger("submit"))})},make:function(a){a.on("keyup change","[name]",function(){$(this).removeClass("require-error").parents(".require-error").removeClass("require-error")});a.on("submit",function(b){$(this).removeClass("require-error").parent().removeClass("require-error").parent().removeClass("require-error");
b.preventDefault();var c=!0;0<$(this).find("[data-form-field-checkboxes-min]").length&&$(this).find("[data-form-field-checkboxes-min]").each(function(){var a=$(this),b=parseInt(a.attr("data-form-field-checkboxes-min"));isNaN(b)&&(b=0);a.find('input[type="checkbox"]:checked').length<b&&(c=!1,a.find('input[type="checkbox"]').addClass("require-error").closest(".input-wrap").addClass("require-error"))});0<$(this).find('input[type="text"][data-required]').length&&$(this).find('input[type="text"][data-required]').each(function(){""===
$(this).val()&&(c=!1,$(this).addClass("require-error").closest(".input-wrap").addClass("require-error"))});0<$(this).find("textarea[data-required]").length&&$(this).find("textarea[data-required]").each(function(){""===$(this).val()&&(c=!1,$(this).addClass("require-error").closest(".input-wrap").addClass("require-error"))});0<$(this).find('input[type="email"][data-required]').length&&$(this).find('input[type="email"][data-required]').each(function(){""===$(this).val()&&(c=!1,$(this).addClass("require-error").closest(".input-wrap").addClass("require-error"))});
0<$(this).find('input[type="checkbox"][data-required]').length&&$(this).find('input[type="checkbox"][data-required]').each(function(){$(this).prop("checked")||(c=!1,$(this).addClass("require-error").closest(".input-wrap").addClass("require-error"))});c&&(hiweb_theme_widget_forms.set_status(a,"wait"),hiweb_theme_widget_forms.submit(a))});a.on("click tap","[data-form-status-close]",function(b){b.preventDefault();hiweb_theme_widget_forms.set_status(a,"")});var b=a.find("[data-input-mask]");0<b.length&&
"function"===typeof b.mask&&b.each(function(){$(this).mask($(this).attr("data-input-mask"))})},set_status:function(a,b,c){var d=a.find(hiweb_theme_widget_forms.status_root_selector);d.is("[data-wait-message]")?d.find(".message").html(d.data("wait-message")):d.attr("data-wait-message",d.find(".message").html());b||(b="");a.attr("data-status",b);c&&d.find(".message").html(c)},submit:function(a){a.ajaxSubmit({dataType:"json",success:function(b){if(b.hasOwnProperty("success")){hiweb_theme_widget_forms.set_status(a,
b.status,b.message);"success"===b.status?(a.trigger("reset"),setTimeout(function(){$.fancybox.close(!0);hiweb_theme_widget_forms.set_status(a,"")},3E3)):setTimeout(function(){"error"!==a.data("status")&&"warn"!==a.data("status")||hiweb_theme_widget_forms.set_status(a,"")},5E3);if(b.hasOwnProperty("error_inputs"))for(var c in b.error_inputs)a.find('[name="'+b.error_inputs[c]+'"]').addClass("require-error").parent().addClass("require-error").closest(".input-wrap").addClass("require-error"),hiweb_theme_widget_forms.set_status(a,
"");b.hasOwnProperty("callback_js")&&""!==b.callback_js&&eval(b.callback_js)}else hiweb_theme_widget_forms.set_status(a,"error","\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0435\u0440\u043d\u0443\u043b \u043d\u0435 \u0432\u0435\u0440\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435")},error:function(b){console.error(b);hiweb_theme_widget_forms.set_status(a,"error","\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430")}})}};
jQuery(document).ready(hiweb_theme_widget_forms.init);
